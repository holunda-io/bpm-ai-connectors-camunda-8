{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "GPT Process Generator Connector",
  "id": "io.holunda.connector.process.v1",
  "description": "Generates and deploys an executable process to solve a task.",
  "version": 1,
  "documentationRef": "https://docs.camunda.io/docs/components/connectors/out-of-the-box-connectors/available-connectors-overview/",
  "icon": {
    "contents": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNi40NTAxIDE0LjRWOC41QzE2LjQ1MDEgNy45NSAxNi4wMDAxIDcuNSAxNS40NTAxIDcuNUgxMi41NSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTQuMDUgNkwxMi4yNSA3LjVMMTQuMDUgOSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNy41NTAwNSAxMC4yVjE0LjM5OTkiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTcuNzAwMDEgOS44OTk5OUM4Ljc3Njk3IDkuODk5OTkgOS42NTAwMiA5LjAyNjk3IDkuNjUwMDIgNy45NTAwMUM5LjY1MDAyIDYuODczMDYgOC43NzY5NyA2IDcuNzAwMDEgNkM2LjYyMzA2IDYgNS43NSA2Ljg3MzA2IDUuNzUgNy45NTAwMUM1Ljc1IDkuMDI2OTcgNi42MjMwNiA5Ljg5OTk5IDcuNzAwMDEgOS44OTk5OVoiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTcuNTQ5OTkgMTcuOTk5OUM4LjU0NDEgMTcuOTk5OSA5LjM0OTk4IDE3LjE5NCA5LjM0OTk4IDE2LjE5OTlDOS4zNDk5OCAxNS4yMDU4IDguNTQ0MSAxNC4zOTk5IDcuNTQ5OTkgMTQuMzk5OUM2LjU1NTg4IDE0LjM5OTkgNS43NSAxNS4yMDU4IDUuNzUgMTYuMTk5OUM1Ljc1IDE3LjE5NCA2LjU1NTg4IDE3Ljk5OTkgNy41NDk5OSAxNy45OTk5WiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTYuNDUgMTcuOTk5OUMxNy40NDQxIDE3Ljk5OTkgMTguMjUgMTcuMTk0IDE4LjI1IDE2LjE5OTlDMTguMjUgMTUuMjA1OCAxNy40NDQxIDE0LjM5OTkgMTYuNDUgMTQuMzk5OUMxNS40NTU5IDE0LjM5OTkgMTQuNjUgMTUuMjA1OCAxNC42NSAxNi4xOTk5QzE0LjY1IDE3LjE5NCAxNS40NTU5IDE3Ljk5OTkgMTYuNDUgMTcuOTk5OVoiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTkgMjJIMTVDMjAgMjIgMjIgMjAgMjIgMTVWOUMyMiA0IDIwIDIgMTUgMkg5QzQgMiAyIDQgMiA5VjE1QzIgMjAgNCAyMiA5IDIyWiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8L3N2Zz4="
  },
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "appliesTo": ["bpmn:Task"],
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "general",
      "label": "General"
    },
    {
      "id": "input",
      "label": "Input"
    },
    {
      "id": "task",
      "label": "Task"
    },
    {
      "id": "activities",
      "label": "Activities"
    },
    {
      "id": "output",
      "label": "Output Mapping"
    }
  ],
  "properties": [
    {
      "type": "Hidden",
      "value": "io.holunda:connector-process:1",
      "binding": {
        "type": "zeebe:taskDefinition:type"
      }
    },
    {
      "id": "model",
      "label": "LLM",
      "group": "general",
      "type": "Dropdown",
      "value": "GPT_3",
      "choices": [
        { "name": "OpenAI GPT-3.5 Turbo", "value": "GPT_3" },
        { "name": "OpenAI GPT-4", "value": "GPT_4" }
      ],
      "binding": {
        "type": "zeebe:input",
        "name": "model"
      }
    },
    {
      "label": "Input variables",
      "group": "input",
      "description": "Map of input variables to provide context. Key should be the variable name. Value is the variable itself as FEEL expression.",
      "type": "Text",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "inputJson"
      },
      "value": "={ \"myVariable\": myVariable }",
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Task description",
      "description": "Describe the task to complete.",
      "group": "task",
      "type": "Text",
      "feel": "optional",
      "value": "Handle the customer's concern.",
      "binding": {
        "type": "zeebe:input",
        "name": "taskDescription"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Activities",
      "description": "Specify candidate activities available to use in the result process.",
      "group": "activities",
      "type": "Text",
      "feel": "optional",
      "value": "={\n  customer_database: {\n    description: \"A service that can retrieve information about a customer and its data.\",\n    task: \"gpt-database\",\n    attributes: {\n      databaseUrl: \"postgresql://postgres:postgres@localhost:5438/postgres\",\n      missingDataBehavior: \"NULL\"\n    }\n  },\n  order_service: {\n    description: \"A service that can modify or cancel orders.\",\n    task: \"gpt-openapi\",\n    attributes: {\n      specUrl: \"http://localhost:8080/api/\",\n      missingDataBehavior: \"NULL\"\n    }\n  },\n  product_qa: {\n    description: \"A service that can answer questions about products.\",\n    task: \"gpt-retrieval\",\n    attributes: {\n      databaseUrl: \"weaviate://http://localhost:8080/Test_index\",\n      embeddingProvider: \"OpenAI\",\n      embeddingModel: \"text-embedding-ada-002\",\n      mode: \"standard\"\n    }\n  },\n  ticket_service: {\n    description: \"A service that can open and close tickets. Needs a customer ID.\",\n    task: \"ticket-worker\"\n  },\n  user_task: {\n    description: \"A human task.\"\n  }\n}",
      "binding": {
        "type": "zeebe:input",
        "name": "activities"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Result expression",
      "description": "Expression to map the result into a process variable. Result is in a temporary variable <code>result</code> that contains the bpmnProcessId of the generated process.",
      "group": "output",
      "type": "Text",
      "feel": "required",
      "value": "={\"bpmnProcessId\": result}",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultExpression"
      }
    }
  ]
}

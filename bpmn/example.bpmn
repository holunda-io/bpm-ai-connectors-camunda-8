<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_026ao2z" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.9.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <bpmn:process id="Process_1fzbo11" isExecutable="true">
    <bpmn:sequenceFlow id="Flow_1lhn5rr" sourceRef="StartEvent_1" targetRef="Activity_01zbvjd" />
    <bpmn:sequenceFlow id="Flow_0c7bwgw" sourceRef="Activity_01zbvjd" targetRef="Activity_0qr9wpe" />
    <bpmn:startEvent id="StartEvent_1" name="Email received">
      <bpmn:outgoing>Flow_1lhn5rr</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_01zbvjd" name="Extract customer data" zeebe:modelerTemplate="io.holunda.connector.extract.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNC4zMjAxIDE5LjA3QzE0LjMyMDEgMTkuNjggMTMuOTIgMjAuNDggMTMuNDEgMjAuNzlMMTIuMDAwMSAyMS43QzEwLjY5MDEgMjIuNTEgOC44NzAwNiAyMS42IDguODcwMDYgMTkuOThWMTQuNjNDOC44NzAwNiAxMy45MiA4LjQ3MDA2IDEzLjAxIDguMDYwMDYgMTIuNTFMNC4yMjAwMyA4LjQ3QzMuNzEwMDMgNy45NiAzLjMxMDA2IDcuMDYwMDEgMy4zMTAwNiA2LjQ1MDAxVjQuMTNDMy4zMTAwNiAyLjkyIDQuMjIwMDggMi4wMTAwMSA1LjMzMDA4IDIuMDEwMDFIMTguNjdDMTkuNzggMi4wMTAwMSAyMC42OTAxIDIuOTIgMjAuNjkwMSA0LjAzVjYuMjVDMjAuNjkwMSA3LjA2IDIwLjE4MDEgOC4wNzAwMSAxOS42ODAxIDguNTcwMDEiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTYuMDcgMTYuNTJDMTcuODM3MyAxNi41MiAxOS4yNyAxNS4wODczIDE5LjI3IDEzLjMyQzE5LjI3IDExLjU1MjcgMTcuODM3MyAxMC4xMiAxNi4wNyAxMC4xMkMxNC4zMDI3IDEwLjEyIDEyLjg3IDExLjU1MjcgMTIuODcgMTMuMzJDMTIuODcgMTUuMDg3MyAxNC4zMDI3IDE2LjUyIDE2LjA3IDE2LjUyWiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTkuODcgMTcuMTJMMTguODcgMTYuMTIiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-extract" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#34;emailBody&#34;: emailBody }" target="inputJson" />
          <zeebe:input source="={&#10;  firstname: &#34;first name&#34;,&#10;  lastname: &#34;last name&#34;,&#10;  language: &#34;the language that the email body is written in, as two letter ISO code&#34;,&#10;  city: &#34;city the customer lives in&#34;&#10;}" target="extractionJson" />
          <zeebe:input source="NULL" target="missingDataBehavior" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={customerInfo: result}" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;MISSING_DATA&#34; then&#10;  bpmnError(&#34;MISSING_DATA&#34;, &#34;One or more values are null.&#34;)&#10;else null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1lhn5rr</bpmn:incoming>
      <bpmn:outgoing>Flow_0c7bwgw</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_01oht24" name="No subscription number" attachedToRef="Activity_0vidx0a">
      <bpmn:outgoing>Flow_0g9pdk3</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0mopd1n" errorRef="Error_09qr27c" />
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="Event_0db6xeo" name="Subscription No. requested">
      <bpmn:incoming>Flow_0fhfdz4</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0g9pdk3" sourceRef="Event_01oht24" targetRef="Activity_1kifd6e" />
    <bpmn:serviceTask id="Activity_0qr9wpe" name="Determine intention" zeebe:modelerTemplate="io.holunda.connector.decide.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMCAxNEMyMS4xMDQ2IDE0IDIyIDEzLjEwNDYgMjIgMTJDMjIgMTAuODk1NCAyMS4xMDQ2IDEwIDIwIDEwQzE4Ljg5NTQgMTAgMTggMTAuODk1NCAxOCAxMkMxOCAxMy4xMDQ2IDE4Ljg5NTQgMTQgMjAgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCA2QzIxLjEwNDYgNiAyMiA1LjEwNDU3IDIyIDRDMjIgMi44OTU0MyAyMS4xMDQ2IDIgMjAgMkMxOC44OTU0IDIgMTggMi44OTU0MyAxOCA0QzE4IDUuMTA0NTcgMTguODk1NCA2IDIwIDZaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCAyMkMyMS4xMDQ2IDIyIDIyIDIxLjEwNDYgMjIgMjBDMjIgMTguODk1NCAyMS4xMDQ2IDE4IDIwIDE4QzE4Ljg5NTQgMTggMTggMTguODk1NCAxOCAyMEMxOCAyMS4xMDQ2IDE4Ljg5NTQgMjIgMjAgMjJaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik00IDE0QzUuMTA0NTcgMTQgNiAxMy4xMDQ2IDYgMTJDNiAxMC44OTU0IDUuMTA0NTcgMTAgNCAxMEMyLjg5NTQzIDEwIDIgMTAuODk1NCAyIDEyQzIgMTMuMTA0NiAyLjg5NTQzIDE0IDQgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik02IDEySDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xOCA0SDE0QzEyIDQgMTEgNSAxMSA3VjE3QzExIDE5IDEyIDIwIDE0IDIwSDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-decide" />
        <zeebe:ioMapping>
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="input" />
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="Decide what the intention of the customer&#39;s mail is." target="instructions" />
          <zeebe:input source="STRING" target="outputType" />
          <zeebe:input source="=[&#10;  &#34;CANCEL_SUBSCRIPTION&#34;,&#10;  &#34;CHANGE_SUBSCRIPTION&#34;,&#10;  &#34;COMPLAINT&#34;,&#10;  &#34;OTHER&#34;&#10;]" target="possibleValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={intention: result.decision}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0c7bwgw</bpmn:incoming>
      <bpmn:outgoing>Flow_1s28elp</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0p0ay6x" name="Intention?">
      <bpmn:incoming>Flow_1s28elp</bpmn:incoming>
      <bpmn:outgoing>Flow_0rwnrqs</bpmn:outgoing>
      <bpmn:outgoing>Flow_0bgcl2d</bpmn:outgoing>
      <bpmn:outgoing>Flow_1a5wjil</bpmn:outgoing>
      <bpmn:outgoing>Flow_1jkz7mj</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1s28elp" sourceRef="Activity_0qr9wpe" targetRef="Gateway_0p0ay6x" />
    <bpmn:endEvent id="Event_1o5twhg" name="Subscription cancelled">
      <bpmn:incoming>Flow_011n3y8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0rwnrqs" name="Cancel subscription" sourceRef="Gateway_0p0ay6x" targetRef="Activity_0vidx0a">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "CANCEL_SUBSCRIPTION"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_1qsv1yn" name="Subscription changed">
      <bpmn:incoming>Flow_0vsjk8n</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0bgcl2d" name="Change subscription" sourceRef="Gateway_0p0ay6x" targetRef="Gateway_11mpzkm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "CHANGE_SUBSCRIPTION"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_1hxbwfm" name="Complaint ignored">
      <bpmn:incoming>Flow_06kwxqb</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1a5wjil" name="Complaint" sourceRef="Gateway_0p0ay6x" targetRef="Activity_02pmh6y">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "COMPLAINT"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_10qzvjk" name="Mail processed">
      <bpmn:incoming>Flow_044gqut</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1jkz7mj" name="Other" sourceRef="Gateway_0p0ay6x" targetRef="Activity_1s5l65q">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "OTHER"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:task id="Activity_0g98l86" name="Cancel subscription">
      <bpmn:incoming>Flow_07i65vl</bpmn:incoming>
      <bpmn:outgoing>Flow_011n3y8</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_011n3y8" sourceRef="Activity_0g98l86" targetRef="Event_1o5twhg" />
    <bpmn:sequenceFlow id="Flow_07i65vl" sourceRef="Activity_0vidx0a" targetRef="Activity_0g98l86" />
    <bpmn:serviceTask id="Activity_0vidx0a" name="Extract subscription number" zeebe:modelerTemplate="io.holunda.connector.extract.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNC4zMjAxIDE5LjA3QzE0LjMyMDEgMTkuNjggMTMuOTIgMjAuNDggMTMuNDEgMjAuNzlMMTIuMDAwMSAyMS43QzEwLjY5MDEgMjIuNTEgOC44NzAwNiAyMS42IDguODcwMDYgMTkuOThWMTQuNjNDOC44NzAwNiAxMy45MiA4LjQ3MDA2IDEzLjAxIDguMDYwMDYgMTIuNTFMNC4yMjAwMyA4LjQ3QzMuNzEwMDMgNy45NiAzLjMxMDA2IDcuMDYwMDEgMy4zMTAwNiA2LjQ1MDAxVjQuMTNDMy4zMTAwNiAyLjkyIDQuMjIwMDggMi4wMTAwMSA1LjMzMDA4IDIuMDEwMDFIMTguNjdDMTkuNzggMi4wMTAwMSAyMC42OTAxIDIuOTIgMjAuNjkwMSA0LjAzVjYuMjVDMjAuNjkwMSA3LjA2IDIwLjE4MDEgOC4wNzAwMSAxOS42ODAxIDguNTcwMDEiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTYuMDcgMTYuNTJDMTcuODM3MyAxNi41MiAxOS4yNyAxNS4wODczIDE5LjI3IDEzLjMyQzE5LjI3IDExLjU1MjcgMTcuODM3MyAxMC4xMiAxNi4wNyAxMC4xMkMxNC4zMDI3IDEwLjEyIDEyLjg3IDExLjU1MjcgMTIuODcgMTMuMzJDMTIuODcgMTUuMDg3MyAxNC4zMDI3IDE2LjUyIDE2LjA3IDE2LjUyWiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTkuODcgMTcuMTJMMTguODcgMTYuMTIiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-extract" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="={ subscriptionNo: &#34;subscription number without possible leading &#39;#&#39;, &#39;No.&#39;, etc.&#34; }" target="extractionJson" />
          <zeebe:input source="ERROR" target="missingDataBehavior" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={subscriptionNo: result.subscriptionNo}" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;MISSING_DATA&#34; then&#10;  bpmnError(&#34;MISSING_DATA&#34;, &#34;One or more values are null.&#34;)&#10;else null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0rwnrqs</bpmn:incoming>
      <bpmn:outgoing>Flow_07i65vl</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:task id="Activity_01ubt82" name="Send reply email">
      <bpmn:incoming>Flow_1ki9b40</bpmn:incoming>
      <bpmn:outgoing>Flow_0fhfdz4</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0fhfdz4" sourceRef="Activity_01ubt82" targetRef="Event_0db6xeo" />
    <bpmn:sequenceFlow id="Flow_044gqut" sourceRef="Activity_08rmjph" targetRef="Event_10qzvjk" />
    <bpmn:userTask id="Activity_08rmjph" name="Process email">
      <bpmn:incoming>Flow_00jaqqd</bpmn:incoming>
      <bpmn:outgoing>Flow_044gqut</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_1s5l65q" name="Decide if spam" zeebe:modelerTemplate="io.holunda.connector.decide.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMCAxNEMyMS4xMDQ2IDE0IDIyIDEzLjEwNDYgMjIgMTJDMjIgMTAuODk1NCAyMS4xMDQ2IDEwIDIwIDEwQzE4Ljg5NTQgMTAgMTggMTAuODk1NCAxOCAxMkMxOCAxMy4xMDQ2IDE4Ljg5NTQgMTQgMjAgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCA2QzIxLjEwNDYgNiAyMiA1LjEwNDU3IDIyIDRDMjIgMi44OTU0MyAyMS4xMDQ2IDIgMjAgMkMxOC44OTU0IDIgMTggMi44OTU0MyAxOCA0QzE4IDUuMTA0NTcgMTguODk1NCA2IDIwIDZaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCAyMkMyMS4xMDQ2IDIyIDIyIDIxLjEwNDYgMjIgMjBDMjIgMTguODk1NCAyMS4xMDQ2IDE4IDIwIDE4QzE4Ljg5NTQgMTggMTggMTguODk1NCAxOCAyMEMxOCAyMS4xMDQ2IDE4Ljg5NTQgMjIgMjAgMjJaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik00IDE0QzUuMTA0NTcgMTQgNiAxMy4xMDQ2IDYgMTJDNiAxMC44OTU0IDUuMTA0NTcgMTAgNCAxMEMyLjg5NTQzIDEwIDIgMTAuODk1NCAyIDEyQzIgMTMuMTA0NiAyLjg5NTQzIDE0IDQgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik02IDEySDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xOCA0SDE0QzEyIDQgMTEgNSAxMSA3VjE3QzExIDE5IDEyIDIwIDE0IDIwSDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-decide" />
        <zeebe:ioMapping>
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="input" />
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="Decide if the mail is spam and not from a customer." target="instructions" />
          <zeebe:input source="BOOLEAN" target="outputType" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={&#10;  isSpam: result.decision, &#10;  isSpamReasoning: result.reasoning&#10;}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1jkz7mj</bpmn:incoming>
      <bpmn:outgoing>Flow_1kpll75</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1kpll75" sourceRef="Activity_1s5l65q" targetRef="Gateway_0s3agty" />
    <bpmn:exclusiveGateway id="Gateway_0s3agty" name="Spam?" default="Flow_00jaqqd">
      <bpmn:incoming>Flow_1kpll75</bpmn:incoming>
      <bpmn:outgoing>Flow_00jaqqd</bpmn:outgoing>
      <bpmn:outgoing>Flow_12j0vak</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_00jaqqd" name="No" sourceRef="Gateway_0s3agty" targetRef="Activity_08rmjph" />
    <bpmn:endEvent id="Event_15cs3na" name="Mail ignored">
      <bpmn:incoming>Flow_12j0vak</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_12j0vak" name="Yes" sourceRef="Gateway_0s3agty" targetRef="Event_15cs3na">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=isSpam</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_1kifd6e" name="Compose reply email" zeebe:modelerTemplate="io.holunda.connector.compose.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMiAyMC41SDdDNCAyMC41IDIgMTkgMiAxNS41VjguNUMyIDUgNCAzLjUgNyAzLjVIMTdDMjAgMy41IDIyIDUgMjIgOC41VjExLjUiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTcgOUwxMy44NyAxMS41QzEyLjg0IDEyLjMyIDExLjE1IDEyLjMyIDEwLjEyIDExLjVMNyA5IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE5LjIxIDE0Ljc3TDE1LjY3MDEgMTguMzFDMTUuNTMwMSAxOC40NSAxNS40IDE4LjcxIDE1LjM3IDE4LjlMMTUuMTggMjAuMjVDMTUuMTEgMjAuNzQgMTUuNDUgMjEuMDgwMSAxNS45NCAyMS4wMTAxTDE3LjI5IDIwLjgyQzE3LjQ4IDIwLjc5IDE3Ljc1IDIwLjY2IDE3Ljg4IDIwLjUyTDIxLjQyMDEgMTYuOTgwMUMyMi4wMzAxIDE2LjM3MDEgMjIuMzIwMSAxNS42NjAxIDIxLjQyMDEgMTQuNzYwMUMyMC41MzAxIDEzLjg3MDEgMTkuODIgMTQuMTYgMTkuMjEgMTQuNzdaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE4LjcwMDEgMTUuMjhDMTkuMDAwMSAxNi4zNiAxOS44NDAxIDE3LjIgMjAuOTIwMSAxNy41IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-compose" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="formal" target="style" />
          <zeebe:input source="friendly" target="tone" />
          <zeebe:input source="=customerInfo.language" target="language" />
          <zeebe:input source="Ask the customer for his subscription number, as we need it to cancel his subscription." target="description" />
          <zeebe:input source="My company" target="sender" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={text: result}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0g9pdk3</bpmn:incoming>
      <bpmn:outgoing>Flow_1ki9b40</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1ki9b40" sourceRef="Activity_1kifd6e" targetRef="Activity_01ubt82" />
    <bpmn:exclusiveGateway id="Gateway_11mpzkm" name="Is email in English?" default="Flow_0i2ldvm">
      <bpmn:incoming>Flow_0bgcl2d</bpmn:incoming>
      <bpmn:outgoing>Flow_0i2ldvm</bpmn:outgoing>
      <bpmn:outgoing>Flow_1lq2i1u</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0i2ldvm" name="Yes" sourceRef="Gateway_11mpzkm" targetRef="Gateway_02w073p" />
    <bpmn:sequenceFlow id="Flow_1lq2i1u" name="No" sourceRef="Gateway_11mpzkm" targetRef="Activity_1pxmyjv">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=upper case(customerInfo.language) != "EN"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_02w073p">
      <bpmn:incoming>Flow_1w8c7vr</bpmn:incoming>
      <bpmn:incoming>Flow_0i2ldvm</bpmn:incoming>
      <bpmn:outgoing>Flow_0vsjk8n</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1w8c7vr" sourceRef="Activity_1pxmyjv" targetRef="Gateway_02w073p" />
    <bpmn:serviceTask id="Activity_1pxmyjv" name="Translate to English" zeebe:modelerTemplate="io.holunda.connector.translate.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS4wNiAxOC42Njk5TDE2LjkyIDE0LjM5OTlMMTQuNzggMTguNjY5OSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTUuMTY5OSAxNy45MDk5SDE4LjY4OTkiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE2LjkyMDEgMjIuMDAwMUMxNC4xMjAxIDIyLjAwMDEgMTEuODQwMSAxOS43MyAxMS44NDAxIDE2LjkyQzExLjg0MDEgMTQuMTIgMTQuMTEwMSAxMS44NDAxIDE2LjkyMDEgMTEuODQwMUMxOS43MjAxIDExLjg0MDEgMjIuMDAwMSAxNC4xMSAyMi4wMDAxIDE2LjkyQzIyLjAwMDEgMTkuNzMgMTkuNzMwMSAyMi4wMDAxIDE2LjkyMDEgMjIuMDAwMVoiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTUuMDIgMkg4Ljk0QzExLjAxIDIgMTIuMDEgMy4wMDAwMiAxMS45NiA1LjAyMDAyVjguOTRDMTIuMDEgMTEuMDEgMTEuMDEgMTIuMDEgOC45NCAxMS45Nkg1LjAyQzMgMTIgMiAxMSAyIDguOTI5OTlWNS4wMTAwMUMyIDMuMDAwMDEgMyAyIDUuMDIgMloiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTkuMDA5OTUgNS44NDk4NUg0Ljk0OTk1IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik02Ljk2OTk3IDUuMTY5OTJWNS44NDk5MSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNy45ODk5NCA1LjgzOTg0QzcuOTg5OTQgNy41ODk4NCA2LjYxOTk0IDkuMDA5ODMgNC45Mzk5NCA5LjAwOTgzIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik05LjAwOTkgOS4wMTAwMUM4LjI3OTkgOS4wMTAwMSA3LjYxOTkxIDguNjIgNy4xNTk5MSA4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yIDE1QzIgMTguODcgNS4xMyAyMiA5IDIyTDcuOTUgMjAuMjUiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTIyIDlDMjIgNS4xMyAxOC44NyAyIDE1IDJMMTYuMDUgMy43NSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8L3N2Zz4=">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-translate" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="English" target="language" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={ &#10;  &#34;emailBody&#34;: result.emailBody, &#10;  &#34;emailSubject&#34;: result.emailSubject&#10;}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1lq2i1u</bpmn:incoming>
      <bpmn:outgoing>Flow_1w8c7vr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_02pmh6y" name="Determine language" zeebe:modelerTemplate="io.holunda.connector.database.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0zLjE3MDA0IDcuNDM5OTRMMTIgMTIuNTQ5OUwyMC43NyA3LjQ2OTkxIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xMiAyMS42MDk5VjEyLjUzOTkiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTIxLjYxIDEyLjgzVjkuMTdDMjEuNjEgNy43OSAyMC42MiA2LjExMDAyIDE5LjQxIDUuNDQwMDJMMTQuMDcgMi40OEMxMi45MyAxLjg0IDExLjA3IDEuODQgOS45Mjk5OSAyLjQ4TDQuNTkgNS40NDAwMkMzLjM4IDYuMTEwMDIgMi4zOTAwMSA3Ljc5IDIuMzkwMDEgOS4xN1YxNC44M0MyLjM5MDAxIDE2LjIxIDMuMzggMTcuODkgNC41OSAxOC41Nkw5LjkyOTk5IDIxLjUyQzEwLjUgMjEuODQgMTEuMjUgMjIgMTIgMjJDMTIuNzUgMjIgMTMuNSAyMS44NCAxNC4wNyAyMS41MiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTkuMiAyMS40QzIwLjk2NzMgMjEuNCAyMi40IDE5Ljk2NzMgMjIuNCAxOC4yQzIyLjQgMTYuNDMyNyAyMC45NjczIDE1IDE5LjIgMTVDMTcuNDMyNyAxNSAxNiAxNi40MzI3IDE2IDE4LjJDMTYgMTkuOTY3MyAxNy40MzI3IDIxLjQgMTkuMiAyMS40WiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMjMgMjJMMjIgMjEiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-database" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_4" target="model" />
          <zeebe:input source="={ &#34;city&#34;: customerInfo.city }" target="inputJson" />
          <zeebe:input source="postgresql://world:world123@world-db: 5432/world-db" target="databaseUrl" />
          <zeebe:input source="Determine the official language based on the city." target="taskDescription" />
          <zeebe:input source="={ language: &#34;the language&#34;}" target="outputSchema" />
          <zeebe:input source="NULL" target="missingDataBehavior" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={&#34;language&#34;: result.language}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1a5wjil</bpmn:incoming>
      <bpmn:outgoing>Flow_06kwxqb</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1m5x71l" name="Find email address" zeebe:modelerTemplate="io.holunda.connector.openapi.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMiAyMkMxNy41MjI4IDIyIDIyIDE3LjUyMjggMjIgMTJDMjIgNi40NzcxNSAxNy41MjI4IDIgMTIgMkM2LjQ3NzE1IDIgMiA2LjQ3NzE1IDIgMTJDMiAxNy41MjI4IDYuNDc3MTUgMjIgMTIgMjJaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik03Ljk5OTk4IDNIOC45OTk5OEM3LjA0OTk4IDguODQgNy4wNDk5OCAxNS4xNiA4Ljk5OTk4IDIxSDcuOTk5OTgiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE1IDNDMTYuOTUgOC44NCAxNi45NSAxNS4xNiAxNSAyMSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMyAxNlYxNUM4Ljg0IDE2Ljk1IDE1LjE2IDE2Ljk1IDIxIDE1VjE2IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0zIDkuMDAwMUM4Ljg0IDcuMDUwMSAxNS4xNiA3LjA1MDEgMjEgOS4wMDAxIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-openapi" />
        <zeebe:ioMapping>
          <zeebe:input source="http://localhost:8080" target="serviceUrl" />
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_4" target="model" />
          <zeebe:input source="={ &#10;  &#34;customerId&#34;: 1&#10;}" target="inputJson" />
          <zeebe:input source="http://customer-service-app:8080/v3/api-docs" target="specUrl" />
          <zeebe:input source="Find the email address of the customer." target="taskDescription" />
          <zeebe:input source="={ mail: &#34;the email address of the customer&#34;}" target="outputSchema" />
          <zeebe:input source="NULL" target="missingDataBehavior" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={&#34;email&#34;: result.mail}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0vsjk8n" sourceRef="Gateway_02w073p" targetRef="Event_1qsv1yn" />
    <bpmn:sequenceFlow id="Flow_06kwxqb" sourceRef="Activity_02pmh6y" targetRef="Event_1hxbwfm" />
  </bpmn:process>
  <bpmn:error id="Error_131f88n" name="Null" errorCode="NULL" />
  <bpmn:error id="Error_09qr27c" name="MISSING_DATA" errorCode="MISSING_DATA" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1fzbo11">
      <bpmndi:BPMNShape id="Event_0ub9z0k_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="172" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="154" y="142" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0v12yuq_di" bpmnElement="Activity_01zbvjd">
        <dc:Bounds x="260" y="77" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0db6xeo_di" bpmnElement="Event_0db6xeo">
        <dc:Bounds x="1342" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1320" y="255" width="81" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_06i94mk_di" bpmnElement="Activity_0qr9wpe">
        <dc:Bounds x="430" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0p0ay6x_di" bpmnElement="Gateway_0p0ay6x" isMarkerVisible="true">
        <dc:Bounds x="595" y="92" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="596" y="70" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1o5twhg_di" bpmnElement="Event_1o5twhg">
        <dc:Bounds x="1342" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1330" y="142" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1qsv1yn_di" bpmnElement="Event_1qsv1yn">
        <dc:Bounds x="1342" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1330" y="465" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1hxbwfm_di" bpmnElement="Event_1hxbwfm">
        <dc:Bounds x="1342" y="792" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1315" y="836" width="90" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_10qzvjk_di" bpmnElement="Event_10qzvjk">
        <dc:Bounds x="1342" y="562" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1323" y="605" width="74" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0g98l86_di" bpmnElement="Activity_0g98l86">
        <dc:Bounds x="880" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jdy3f0_di" bpmnElement="Activity_0vidx0a">
        <dc:Bounds x="710" y="77" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_01ubt82_di" bpmnElement="Activity_01ubt82">
        <dc:Bounds x="1170" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_137zg0b_di" bpmnElement="Activity_08rmjph">
        <dc:Bounds x="1170" y="540" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1dunq3j" bpmnElement="Activity_1s5l65q">
        <dc:Bounds x="710" y="540" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0s3agty_di" bpmnElement="Gateway_0s3agty" isMarkerVisible="true">
        <dc:Bounds x="875" y="555" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="883" y="533" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_15cs3na_di" bpmnElement="Event_15cs3na">
        <dc:Bounds x="1342" y="672" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1330" y="715" width="60" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0uazwvn_di" bpmnElement="Activity_1kifd6e">
        <dc:Bounds x="880" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_11mpzkm_di" bpmnElement="Gateway_11mpzkm" isMarkerVisible="true">
        <dc:Bounds x="735" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="735" y="472" width="50" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_02w073p_di" bpmnElement="Gateway_02w073p" isMarkerVisible="true">
        <dc:Bounds x="1065" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0e8lz5p_di" bpmnElement="Activity_1pxmyjv">
        <dc:Bounds x="880" y="320" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1dw3ypb_di" bpmnElement="Activity_02pmh6y">
        <dc:Bounds x="710" y="770" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1mefuax_di" bpmnElement="Activity_1m5x71l">
        <dc:Bounds x="710" y="920" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0u1hndy_di" bpmnElement="Event_01oht24">
        <dc:Bounds x="739" y="139" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="762" y="176" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1lhn5rr_di" bpmnElement="Flow_1lhn5rr">
        <di:waypoint x="208" y="117" />
        <di:waypoint x="260" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0c7bwgw_di" bpmnElement="Flow_0c7bwgw">
        <di:waypoint x="360" y="117" />
        <di:waypoint x="430" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0g9pdk3_di" bpmnElement="Flow_0g9pdk3">
        <di:waypoint x="757" y="175" />
        <di:waypoint x="757" y="230" />
        <di:waypoint x="880" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1s28elp_di" bpmnElement="Flow_1s28elp">
        <di:waypoint x="530" y="117" />
        <di:waypoint x="595" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rwnrqs_di" bpmnElement="Flow_0rwnrqs">
        <di:waypoint x="645" y="117" />
        <di:waypoint x="710" y="117" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="636" y="126" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bgcl2d_di" bpmnElement="Flow_0bgcl2d">
        <di:waypoint x="620" y="142" />
        <di:waypoint x="620" y="440" />
        <di:waypoint x="735" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="628" y="446" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a5wjil_di" bpmnElement="Flow_1a5wjil">
        <di:waypoint x="620" y="142" />
        <di:waypoint x="620" y="810" />
        <di:waypoint x="710" y="810" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="629" y="818" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jkz7mj_di" bpmnElement="Flow_1jkz7mj">
        <di:waypoint x="620" y="142" />
        <di:waypoint x="620" y="580" />
        <di:waypoint x="710" y="580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="646" y="588" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_011n3y8_di" bpmnElement="Flow_011n3y8">
        <di:waypoint x="980" y="117" />
        <di:waypoint x="1342" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07i65vl_di" bpmnElement="Flow_07i65vl">
        <di:waypoint x="810" y="117" />
        <di:waypoint x="880" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fhfdz4_di" bpmnElement="Flow_0fhfdz4">
        <di:waypoint x="1270" y="230" />
        <di:waypoint x="1342" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_044gqut_di" bpmnElement="Flow_044gqut">
        <di:waypoint x="1270" y="580" />
        <di:waypoint x="1342" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kpll75_di" bpmnElement="Flow_1kpll75">
        <di:waypoint x="810" y="580" />
        <di:waypoint x="875" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00jaqqd_di" bpmnElement="Flow_00jaqqd">
        <di:waypoint x="925" y="580" />
        <di:waypoint x="1170" y="580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="972" y="559" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12j0vak_di" bpmnElement="Flow_12j0vak">
        <di:waypoint x="900" y="605" />
        <di:waypoint x="900" y="690" />
        <di:waypoint x="1342" y="690" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="908" y="633" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ki9b40_di" bpmnElement="Flow_1ki9b40">
        <di:waypoint x="980" y="230" />
        <di:waypoint x="1170" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i2ldvm_di" bpmnElement="Flow_0i2ldvm">
        <di:waypoint x="785" y="440" />
        <di:waypoint x="1065" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="916" y="422" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lq2i1u_di" bpmnElement="Flow_1lq2i1u">
        <di:waypoint x="760" y="415" />
        <di:waypoint x="760" y="360" />
        <di:waypoint x="880" y="360" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="768" y="385" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w8c7vr_di" bpmnElement="Flow_1w8c7vr">
        <di:waypoint x="980" y="360" />
        <di:waypoint x="1090" y="360" />
        <di:waypoint x="1090" y="415" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vsjk8n_di" bpmnElement="Flow_0vsjk8n">
        <di:waypoint x="1115" y="440" />
        <di:waypoint x="1342" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06kwxqb_di" bpmnElement="Flow_06kwxqb">
        <di:waypoint x="810" y="810" />
        <di:waypoint x="1342" y="810" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>

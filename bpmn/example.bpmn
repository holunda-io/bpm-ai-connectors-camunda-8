<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_026ao2z" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.9.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <bpmn:process id="Process_1fzbo11" isExecutable="true">
    <bpmn:extensionElements>
      <zeebe:userTaskForm id="userTaskForm_12on07k">{
  "components": [
    {
      "text": "# Answer question about order",
      "type": "text",
      "id": "Field_1iuiyym"
    },
    {
      "text": "=\"Order Number: \" + string(orderNo)",
      "type": "text",
      "id": "Field_1l07f8m"
    },
    {
      "text": "=\"Question: \" + question",
      "type": "text",
      "id": "Field_0bkxp3q"
    },
    {
      "label": "Answer",
      "type": "textarea",
      "id": "Field_02um984",
      "key": "answer"
    },
    {
      "action": "submit",
      "label": "Submit",
      "type": "button",
      "id": "Field_0mk7v9s",
      "key": "field_1g36id3",
      "conditional": {
        "hide": "=answer = \"\""
      }
    }
  ],
  "type": "default",
  "id": "Form_1rw7thd",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.9.0"
  },
  "schemaVersion": 7
}</zeebe:userTaskForm>
    </bpmn:extensionElements>
    <bpmn:startEvent id="StartEvent_1" name="Email received">
      <bpmn:outgoing>Flow_1nwj9kt</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_01zbvjd" name="Extract customer data" zeebe:modelerTemplate="io.holunda.connector.extract.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNC4zMjAxIDE5LjA3QzE0LjMyMDEgMTkuNjggMTMuOTIgMjAuNDggMTMuNDEgMjAuNzlMMTIuMDAwMSAyMS43QzEwLjY5MDEgMjIuNTEgOC44NzAwNiAyMS42IDguODcwMDYgMTkuOThWMTQuNjNDOC44NzAwNiAxMy45MiA4LjQ3MDA2IDEzLjAxIDguMDYwMDYgMTIuNTFMNC4yMjAwMyA4LjQ3QzMuNzEwMDMgNy45NiAzLjMxMDA2IDcuMDYwMDEgMy4zMTAwNiA2LjQ1MDAxVjQuMTNDMy4zMTAwNiAyLjkyIDQuMjIwMDggMi4wMTAwMSA1LjMzMDA4IDIuMDEwMDFIMTguNjdDMTkuNzggMi4wMTAwMSAyMC42OTAxIDIuOTIgMjAuNjkwMSA0LjAzVjYuMjVDMjAuNjkwMSA3LjA2IDIwLjE4MDEgOC4wNzAwMSAxOS42ODAxIDguNTcwMDEiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTYuMDcgMTYuNTJDMTcuODM3MyAxNi41MiAxOS4yNyAxNS4wODczIDE5LjI3IDEzLjMyQzE5LjI3IDExLjU1MjcgMTcuODM3MyAxMC4xMiAxNi4wNyAxMC4xMkMxNC4zMDI3IDEwLjEyIDEyLjg3IDExLjU1MjcgMTIuODcgMTMuMzJDMTIuODcgMTUuMDg3MyAxNC4zMDI3IDE2LjUyIDE2LjA3IDE2LjUyWiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTkuODcgMTcuMTJMMTguODcgMTYuMTIiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-extract" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#34;emailBody&#34;: emailBody }" target="inputJson" />
          <zeebe:input source="={&#10;  firstname: &#34;first name&#34;,&#10;  lastname: &#34;last name&#34;,&#10;  language: &#34;what is the language that the email body is written in, as two letter ISO code?&#34;,&#10;  question: &#34;what question does the customer have?&#34;&#10;}" target="extractionJson" />
          <zeebe:input source="REPEATED" target="mode" />
          <zeebe:input source="Mentioned persons" target="entitiesDescription" />
          <zeebe:input source="NULL" target="missingDataBehavior" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={customerInfo: result}" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;MISSING_DATA&#34; then&#10;  bpmnError(&#34;MISSING_DATA&#34;, &#34;One or more values are null.&#34;)&#10;else null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0rwnrqs</bpmn:incoming>
      <bpmn:outgoing>Flow_0p6n5wl</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_01oht24" name="No order number" attachedToRef="Activity_0vidx0a">
      <bpmn:outgoing>Flow_0g9pdk3</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0mopd1n" errorRef="Error_0oezphj" />
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="Event_0db6xeo" name="Order No. requested">
      <bpmn:incoming>Flow_1ki9b40</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0g9pdk3" sourceRef="Event_01oht24" targetRef="Activity_1kifd6e" />
    <bpmn:serviceTask id="Activity_0qr9wpe" name="Determine intention" zeebe:modelerTemplate="io.holunda.connector.decide.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMCAxNEMyMS4xMDQ2IDE0IDIyIDEzLjEwNDYgMjIgMTJDMjIgMTAuODk1NCAyMS4xMDQ2IDEwIDIwIDEwQzE4Ljg5NTQgMTAgMTggMTAuODk1NCAxOCAxMkMxOCAxMy4xMDQ2IDE4Ljg5NTQgMTQgMjAgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCA2QzIxLjEwNDYgNiAyMiA1LjEwNDU3IDIyIDRDMjIgMi44OTU0MyAyMS4xMDQ2IDIgMjAgMkMxOC44OTU0IDIgMTggMi44OTU0MyAxOCA0QzE4IDUuMTA0NTcgMTguODk1NCA2IDIwIDZaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCAyMkMyMS4xMDQ2IDIyIDIyIDIxLjEwNDYgMjIgMjBDMjIgMTguODk1NCAyMS4xMDQ2IDE4IDIwIDE4QzE4Ljg5NTQgMTggMTggMTguODk1NCAxOCAyMEMxOCAyMS4xMDQ2IDE4Ljg5NTQgMjIgMjAgMjJaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik00IDE0QzUuMTA0NTcgMTQgNiAxMy4xMDQ2IDYgMTJDNiAxMC44OTU0IDUuMTA0NTcgMTAgNCAxMEMyLjg5NTQzIDEwIDIgMTAuODk1NCAyIDEyQzIgMTMuMTA0NiAyLjg5NTQzIDE0IDQgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik02IDEySDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xOCA0SDE0QzEyIDQgMTEgNSAxMSA3VjE3QzExIDE5IDEyIDIwIDE0IDIwSDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-decide" />
        <zeebe:ioMapping>
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="input" />
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="Decide what the primary intention of the customer&#39;s mail is." target="instructions" />
          <zeebe:input source="STRING" target="outputType" />
          <zeebe:input source="=[&#10;  &#34;QUESTION_ABOUT_ORDER&#34;,&#10;  &#34;GENERAL_COMPLAINT&#34;,&#10;  &#34;OTHER&#34;&#10;]" target="possibleValues" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={intention: result.decision}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1nwj9kt</bpmn:incoming>
      <bpmn:outgoing>Flow_1s28elp</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0p0ay6x" name="Intention?">
      <bpmn:incoming>Flow_1s28elp</bpmn:incoming>
      <bpmn:outgoing>Flow_0rwnrqs</bpmn:outgoing>
      <bpmn:outgoing>Flow_1a5wjil</bpmn:outgoing>
      <bpmn:outgoing>Flow_1jkz7mj</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1s28elp" sourceRef="Activity_0qr9wpe" targetRef="Gateway_0p0ay6x" />
    <bpmn:endEvent id="Event_1o5twhg" name="Question answered">
      <bpmn:incoming>Flow_0x0f06e</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0rwnrqs" name="Question" sourceRef="Gateway_0p0ay6x" targetRef="Activity_01zbvjd">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "QUESTION_ABOUT_ORDER"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_1hxbwfm" name="Complaint answered">
      <bpmn:incoming>Flow_05srrqt</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1a5wjil" name="Complaint" sourceRef="Gateway_0p0ay6x" targetRef="Activity_1xh01w0">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "GENERAL_COMPLAINT"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_10qzvjk" name="Mail processed">
      <bpmn:incoming>Flow_044gqut</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1jkz7mj" name="Other" sourceRef="Gateway_0p0ay6x" targetRef="Activity_1s5l65q">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=intention = "OTHER"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_011n3y8" sourceRef="Activity_0g98l86" targetRef="Activity_0dn2d03" />
    <bpmn:sequenceFlow id="Flow_07i65vl" sourceRef="Activity_0vidx0a" targetRef="Gateway_0qi37bm" />
    <bpmn:serviceTask id="Activity_0vidx0a" name="Extract order number" zeebe:modelerTemplate="io.holunda.connector.extract.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNC4zMjAxIDE5LjA3QzE0LjMyMDEgMTkuNjggMTMuOTIgMjAuNDggMTMuNDEgMjAuNzlMMTIuMDAwMSAyMS43QzEwLjY5MDEgMjIuNTEgOC44NzAwNiAyMS42IDguODcwMDYgMTkuOThWMTQuNjNDOC44NzAwNiAxMy45MiA4LjQ3MDA2IDEzLjAxIDguMDYwMDYgMTIuNTFMNC4yMjAwMyA4LjQ3QzMuNzEwMDMgNy45NiAzLjMxMDA2IDcuMDYwMDEgMy4zMTAwNiA2LjQ1MDAxVjQuMTNDMy4zMTAwNiAyLjkyIDQuMjIwMDggMi4wMTAwMSA1LjMzMDA4IDIuMDEwMDFIMTguNjdDMTkuNzggMi4wMTAwMSAyMC42OTAxIDIuOTIgMjAuNjkwMSA0LjAzVjYuMjVDMjAuNjkwMSA3LjA2IDIwLjE4MDEgOC4wNzAwMSAxOS42ODAxIDguNTcwMDEiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTYuMDcgMTYuNTJDMTcuODM3MyAxNi41MiAxOS4yNyAxNS4wODczIDE5LjI3IDEzLjMyQzE5LjI3IDExLjU1MjcgMTcuODM3MyAxMC4xMiAxNi4wNyAxMC4xMkMxNC4zMDI3IDEwLjEyIDEyLjg3IDExLjU1MjcgMTIuODcgMTMuMzJDMTIuODcgMTUuMDg3MyAxNC4zMDI3IDE2LjUyIDE2LjA3IDE2LjUyWiIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTkuODcgMTcuMTJMMTguODcgMTYuMTIiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-extract" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="={ &#10;  orderNo: {&#10;    description: &#34;the order number&#34;,&#10;    type: &#34;integer&#34;&#10;  }&#10;}" target="extractionJson" />
          <zeebe:input source="SINGLE" target="mode" />
          <zeebe:input source="ERROR" target="missingDataBehavior" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={orderNo: result.orderNo}" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;MISSING_DATA&#34; then&#10;  bpmnError(&#34;MISSING_DATA&#34;, &#34;One or more values are null.&#34;)&#10;else null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0p6n5wl</bpmn:incoming>
      <bpmn:outgoing>Flow_07i65vl</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_044gqut" sourceRef="Activity_08rmjph" targetRef="Event_10qzvjk" />
    <bpmn:userTask id="Activity_08rmjph" name="Process email">
      <bpmn:incoming>Flow_00jaqqd</bpmn:incoming>
      <bpmn:outgoing>Flow_044gqut</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0s3agty" name="Spam?" default="Flow_00jaqqd">
      <bpmn:incoming>Flow_1kpll75</bpmn:incoming>
      <bpmn:outgoing>Flow_00jaqqd</bpmn:outgoing>
      <bpmn:outgoing>Flow_12j0vak</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_00jaqqd" name="No" sourceRef="Gateway_0s3agty" targetRef="Activity_08rmjph" />
    <bpmn:endEvent id="Event_15cs3na" name="Mail ignored">
      <bpmn:incoming>Flow_12j0vak</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_12j0vak" name="Yes" sourceRef="Gateway_0s3agty" targetRef="Event_15cs3na">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=isSpam</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_1kifd6e" name="Compose reply email" zeebe:modelerTemplate="io.holunda.connector.compose.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMiAyMC41SDdDNCAyMC41IDIgMTkgMiAxNS41VjguNUMyIDUgNCAzLjUgNyAzLjVIMTdDMjAgMy41IDIyIDUgMjIgOC41VjExLjUiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTcgOUwxMy44NyAxMS41QzEyLjg0IDEyLjMyIDExLjE1IDEyLjMyIDEwLjEyIDExLjVMNyA5IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE5LjIxIDE0Ljc3TDE1LjY3MDEgMTguMzFDMTUuNTMwMSAxOC40NSAxNS40IDE4LjcxIDE1LjM3IDE4LjlMMTUuMTggMjAuMjVDMTUuMTEgMjAuNzQgMTUuNDUgMjEuMDgwMSAxNS45NCAyMS4wMTAxTDE3LjI5IDIwLjgyQzE3LjQ4IDIwLjc5IDE3Ljc1IDIwLjY2IDE3Ljg4IDIwLjUyTDIxLjQyMDEgMTYuOTgwMUMyMi4wMzAxIDE2LjM3MDEgMjIuMzIwMSAxNS42NjAxIDIxLjQyMDEgMTQuNzYwMUMyMC41MzAxIDEzLjg3MDEgMTkuODIgMTQuMTYgMTkuMjEgMTQuNzdaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE4LjcwMDEgMTUuMjhDMTkuMDAwMSAxNi4zNiAxOS44NDAxIDE3LjIgMjAuOTIwMSAxNy41IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-compose" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="formal" target="style" />
          <zeebe:input source="friendly" target="tone" />
          <zeebe:input source="=customerInfo.language" target="language" />
          <zeebe:input source="adequate" target="length" />
          <zeebe:input source="Ask the customer for his or her order number, as we need it to answer any questions about his or her order." target="description" />
          <zeebe:input source="My company" target="sender" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={text: result.text}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0g9pdk3</bpmn:incoming>
      <bpmn:outgoing>Flow_1ki9b40</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1ki9b40" sourceRef="Activity_1kifd6e" targetRef="Event_0db6xeo" />
    <bpmn:sequenceFlow id="Flow_1nwj9kt" sourceRef="StartEvent_1" targetRef="Activity_0qr9wpe" />
    <bpmn:serviceTask id="Activity_0dn2d03" name="Compose answer email" zeebe:modelerTemplate="io.holunda.connector.compose.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMiAyMC41SDdDNCAyMC41IDIgMTkgMiAxNS41VjguNUMyIDUgNCAzLjUgNyAzLjVIMTdDMjAgMy41IDIyIDUgMjIgOC41VjExLjUiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTcgOUwxMy44NyAxMS41QzEyLjg0IDEyLjMyIDExLjE1IDEyLjMyIDEwLjEyIDExLjVMNyA5IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE5LjIxIDE0Ljc3TDE1LjY3MDEgMTguMzFDMTUuNTMwMSAxOC40NSAxNS40IDE4LjcxIDE1LjM3IDE4LjlMMTUuMTggMjAuMjVDMTUuMTEgMjAuNzQgMTUuNDUgMjEuMDgwMSAxNS45NCAyMS4wMTAxTDE3LjI5IDIwLjgyQzE3LjQ4IDIwLjc5IDE3Ljc1IDIwLjY2IDE3Ljg4IDIwLjUyTDIxLjQyMDEgMTYuOTgwMUMyMi4wMzAxIDE2LjM3MDEgMjIuMzIwMSAxNS42NjAxIDIxLjQyMDEgMTQuNzYwMUMyMC41MzAxIDEzLjg3MDEgMTkuODIgMTQuMTYgMTkuMjEgMTQuNzdaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE4LjcwMDEgMTUuMjhDMTkuMDAwMSAxNi4zNiAxOS44NDAxIDE3LjIgMjAuOTIwMSAxNy41IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-compose" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;customerLastname&#34;: customerInfo.lastname,&#10;  &#34;question&#34;: customerInfo.question, &#10;  &#34;answerFromCustomerService&#34;: answer&#10;}" target="inputJson" />
          <zeebe:input source="formal" target="style" />
          <zeebe:input source="friendly" target="tone" />
          <zeebe:input source="=customerInfo.language" target="language" />
          <zeebe:input source="adequate" target="length" />
          <zeebe:input source="Answer the question of the customer based on the answer given by customer service." target="description" />
          <zeebe:input source="My company" target="sender" />
          <zeebe:input source="custom" target="constitutionalPrinciple" />
          <zeebe:input source="The text must not contain any offensive or rude language. It should always be polite and professional." target="customPrinciple" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={text: result.text}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_011n3y8</bpmn:incoming>
      <bpmn:outgoing>Flow_0x0f06e</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0x0f06e" sourceRef="Activity_0dn2d03" targetRef="Event_1o5twhg" />
    <bpmn:userTask id="Activity_0g98l86" name="Answer question">
      <bpmn:extensionElements>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_12on07k" />
        <zeebe:ioMapping>
          <zeebe:input source="=orderNo" target="orderNo" />
          <zeebe:input source="=questionEN" target="question" />
          <zeebe:output source="=answer" target="answer" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0iqj8x1</bpmn:incoming>
      <bpmn:outgoing>Flow_011n3y8</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0p6n5wl" sourceRef="Activity_01zbvjd" targetRef="Activity_0vidx0a" />
    <bpmn:serviceTask id="Activity_0skqci5" name="Translate to English" zeebe:modelerTemplate="io.holunda.connector.translate.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS4wNiAxOC42Njk5TDE2LjkyIDE0LjM5OTlMMTQuNzggMTguNjY5OSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTUuMTY5OSAxNy45MDk5SDE4LjY4OTkiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE2LjkyMDEgMjIuMDAwMUMxNC4xMjAxIDIyLjAwMDEgMTEuODQwMSAxOS43MyAxMS44NDAxIDE2LjkyQzExLjg0MDEgMTQuMTIgMTQuMTEwMSAxMS44NDAxIDE2LjkyMDEgMTEuODQwMUMxOS43MjAxIDExLjg0MDEgMjIuMDAwMSAxNC4xMSAyMi4wMDAxIDE2LjkyQzIyLjAwMDEgMTkuNzMgMTkuNzMwMSAyMi4wMDAxIDE2LjkyMDEgMjIuMDAwMVoiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTUuMDIgMkg4Ljk0QzExLjAxIDIgMTIuMDEgMy4wMDAwMiAxMS45NiA1LjAyMDAyVjguOTRDMTIuMDEgMTEuMDEgMTEuMDEgMTIuMDEgOC45NCAxMS45Nkg1LjAyQzMgMTIgMiAxMSAyIDguOTI5OTlWNS4wMTAwMUMyIDMuMDAwMDEgMyAyIDUuMDIgMloiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTkuMDA5OTUgNS44NDk4NUg0Ljk0OTk1IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik02Ljk2OTk3IDUuMTY5OTJWNS44NDk5MSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNy45ODk5NCA1LjgzOTg0QzcuOTg5OTQgNy41ODk4NCA2LjYxOTk0IDkuMDA5ODMgNC45Mzk5NCA5LjAwOTgzIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik05LjAwOTkgOS4wMTAwMUM4LjI3OTkgOS4wMTAwMSA3LjYxOTkxIDguNjIgNy4xNTk5MSA4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yIDE1QzIgMTguODcgNS4xMyAyMiA5IDIyTDcuOTUgMjAuMjUiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTIyIDlDMjIgNS4xMyAxOC44NyAyIDE1IDJMMTYuMDUgMy43NSIgc3Ryb2tlPSIjMjkyRDMyIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8L3N2Zz4=">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-translate" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;question&#34;: customerInfo.question&#10;}" target="inputJson" />
          <zeebe:input source="English" target="language" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={ &#10;  &#34;questionEN&#34;: result.question&#10;}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1cl3hnn</bpmn:incoming>
      <bpmn:outgoing>Flow_1da25ub</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0qi37bm" name="Is email in English?" default="Flow_0yjkkkh">
      <bpmn:incoming>Flow_07i65vl</bpmn:incoming>
      <bpmn:outgoing>Flow_0yjkkkh</bpmn:outgoing>
      <bpmn:outgoing>Flow_1cl3hnn</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0yjkkkh" name="Yes" sourceRef="Gateway_0qi37bm" targetRef="Gateway_16nyr1d" />
    <bpmn:sequenceFlow id="Flow_1cl3hnn" name="No" sourceRef="Gateway_0qi37bm" targetRef="Activity_0skqci5">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=upper case(customerInfo.language) != "EN"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_16nyr1d">
      <bpmn:incoming>Flow_0yjkkkh</bpmn:incoming>
      <bpmn:incoming>Flow_1da25ub</bpmn:incoming>
      <bpmn:outgoing>Flow_0iqj8x1</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0iqj8x1" sourceRef="Gateway_16nyr1d" targetRef="Activity_0g98l86" />
    <bpmn:sequenceFlow id="Flow_1da25ub" sourceRef="Activity_0skqci5" targetRef="Gateway_16nyr1d" />
    <bpmn:serviceTask id="Activity_1xh01w0" name="Compose reply email" zeebe:modelerTemplate="io.holunda.connector.compose.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMiAyMC41SDdDNCAyMC41IDIgMTkgMiAxNS41VjguNUMyIDUgNCAzLjUgNyAzLjVIMTdDMjAgMy41IDIyIDUgMjIgOC41VjExLjUiIHN0cm9rZT0iIzI5MkQzMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTcgOUwxMy44NyAxMS41QzEyLjg0IDEyLjMyIDExLjE1IDEyLjMyIDEwLjEyIDExLjVMNyA5IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE5LjIxIDE0Ljc3TDE1LjY3MDEgMTguMzFDMTUuNTMwMSAxOC40NSAxNS40IDE4LjcxIDE1LjM3IDE4LjlMMTUuMTggMjAuMjVDMTUuMTEgMjAuNzQgMTUuNDUgMjEuMDgwMSAxNS45NCAyMS4wMTAxTDE3LjI5IDIwLjgyQzE3LjQ4IDIwLjc5IDE3Ljc1IDIwLjY2IDE3Ljg4IDIwLjUyTDIxLjQyMDEgMTYuOTgwMUMyMi4wMzAxIDE2LjM3MDEgMjIuMzIwMSAxNS42NjAxIDIxLjQyMDEgMTQuNzYwMUMyMC41MzAxIDEzLjg3MDEgMTkuODIgMTQuMTYgMTkuMjEgMTQuNzdaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE4LjcwMDEgMTUuMjhDMTkuMDAwMSAxNi4zNiAxOS44NDAxIDE3LjIgMjAuOTIwMSAxNy41IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-compose" />
        <zeebe:ioMapping>
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="formal" target="style" />
          <zeebe:input source="overly friendly" target="tone" />
          <zeebe:input source="English" target="language" />
          <zeebe:input source="brief" target="length" />
          <zeebe:input source="Politely excuse yourself for any inconvenience that may have been caused and assure that the complaint is being forwarded." target="description" />
          <zeebe:input source="My company" target="sender" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={text: result.text}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1a5wjil</bpmn:incoming>
      <bpmn:outgoing>Flow_05srrqt</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_05srrqt" sourceRef="Activity_1xh01w0" targetRef="Event_1hxbwfm" />
    <bpmn:serviceTask id="Activity_1s5l65q" name="Decide if spam" zeebe:modelerTemplate="io.holunda.connector.decide.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMCAxNEMyMS4xMDQ2IDE0IDIyIDEzLjEwNDYgMjIgMTJDMjIgMTAuODk1NCAyMS4xMDQ2IDEwIDIwIDEwQzE4Ljg5NTQgMTAgMTggMTAuODk1NCAxOCAxMkMxOCAxMy4xMDQ2IDE4Ljg5NTQgMTQgMjAgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCA2QzIxLjEwNDYgNiAyMiA1LjEwNDU3IDIyIDRDMjIgMi44OTU0MyAyMS4xMDQ2IDIgMjAgMkMxOC44OTU0IDIgMTggMi44OTU0MyAxOCA0QzE4IDUuMTA0NTcgMTguODk1NCA2IDIwIDZaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMCAyMkMyMS4xMDQ2IDIyIDIyIDIxLjEwNDYgMjIgMjBDMjIgMTguODk1NCAyMS4xMDQ2IDE4IDIwIDE4QzE4Ljg5NTQgMTggMTggMTguODk1NCAxOCAyMEMxOCAyMS4xMDQ2IDE4Ljg5NTQgMjIgMjAgMjJaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik00IDE0QzUuMTA0NTcgMTQgNiAxMy4xMDQ2IDYgMTJDNiAxMC44OTU0IDUuMTA0NTcgMTAgNCAxMEMyLjg5NTQzIDEwIDIgMTAuODk1NCAyIDEyQzIgMTMuMTA0NiAyLjg5NTQzIDE0IDQgMTRaIiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik02IDEySDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xOCA0SDE0QzEyIDQgMTEgNSAxMSA3VjE3QzExIDE5IDEyIDIwIDE0IDIwSDE4IiBzdHJva2U9IiMyOTJEMzIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg==">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="gpt-decide" />
        <zeebe:ioMapping>
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="input" />
          <zeebe:input source="secrets.OPENAI_API_KEY" target="apiKey" />
          <zeebe:input source="GPT_3" target="model" />
          <zeebe:input source="={ &#10;  &#34;emailBody&#34;: emailBody, &#10;  &#34;emailSubject&#34;: emailSubject&#10;}" target="inputJson" />
          <zeebe:input source="Decide if the mail is spam and not from a customer." target="instructions" />
          <zeebe:input source="BOOLEAN" target="outputType" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={&#10;  isSpam: result.decision, &#10;  isSpamReasoning: result.reasoning&#10;}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1jkz7mj</bpmn:incoming>
      <bpmn:outgoing>Flow_1kpll75</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1kpll75" sourceRef="Activity_1s5l65q" targetRef="Gateway_0s3agty" />
  </bpmn:process>
  <bpmn:error id="Error_131f88n" name="Null" errorCode="NULL" />
  <bpmn:error id="Error_0oezphj" name="MISSING_DATA" errorCode="MISSING_DATA" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1fzbo11">
      <bpmndi:BPMNShape id="Event_0ub9z0k_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="172" y="189" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="154" y="232" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0v12yuq_di" bpmnElement="Activity_01zbvjd">
        <dc:Bounds x="520" y="167" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0db6xeo_di" bpmnElement="Event_0db6xeo">
        <dc:Bounds x="1582" y="302" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1576" y="345" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_06i94mk_di" bpmnElement="Activity_0qr9wpe">
        <dc:Bounds x="260" y="167" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0p0ay6x_di" bpmnElement="Gateway_0p0ay6x" isMarkerVisible="true">
        <dc:Bounds x="415" y="182" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="416" y="160" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1o5twhg_di" bpmnElement="Event_1o5twhg">
        <dc:Bounds x="1582" y="189" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1577" y="232" width="48" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1hxbwfm_di" bpmnElement="Event_1hxbwfm">
        <dc:Bounds x="1582" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1575" y="496" width="50" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_10qzvjk_di" bpmnElement="Event_10qzvjk">
        <dc:Bounds x="1582" y="612" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1563" y="655" width="74" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jdy3f0_di" bpmnElement="Activity_0vidx0a">
        <dc:Bounds x="680" y="167" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_137zg0b_di" bpmnElement="Activity_08rmjph">
        <dc:Bounds x="1410" y="590" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0s3agty_di" bpmnElement="Gateway_0s3agty" isMarkerVisible="true">
        <dc:Bounds x="705" y="605" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="713" y="583" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_15cs3na_di" bpmnElement="Event_15cs3na">
        <dc:Bounds x="1582" y="732" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1570" y="775" width="60" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0uazwvn_di" bpmnElement="Activity_1kifd6e">
        <dc:Bounds x="1410" y="280" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1rtpgmn" bpmnElement="Activity_0dn2d03">
        <dc:Bounds x="1410" y="167" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04fe0ov_di" bpmnElement="Activity_0g98l86">
        <dc:Bounds x="1240" y="167" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ttogki" bpmnElement="Activity_0skqci5">
        <dc:Bounds x="960" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0qi37bm_di" bpmnElement="Gateway_0qi37bm" isMarkerVisible="true">
        <dc:Bounds x="845" y="182" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="845" y="239" width="50" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_16nyr1d_di" bpmnElement="Gateway_16nyr1d" isMarkerVisible="true">
        <dc:Bounds x="1125" y="182" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0rt8f5q" bpmnElement="Activity_1xh01w0">
        <dc:Bounds x="1410" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1dunq3j" bpmnElement="Activity_1s5l65q">
        <dc:Bounds x="520" y="590" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0u1hndy_di" bpmnElement="Event_01oht24">
        <dc:Bounds x="709" y="229" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="732" y="267" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0g9pdk3_di" bpmnElement="Flow_0g9pdk3">
        <di:waypoint x="727" y="265" />
        <di:waypoint x="727" y="320" />
        <di:waypoint x="1410" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1s28elp_di" bpmnElement="Flow_1s28elp">
        <di:waypoint x="360" y="207" />
        <di:waypoint x="415" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rwnrqs_di" bpmnElement="Flow_0rwnrqs">
        <di:waypoint x="465" y="207" />
        <di:waypoint x="520" y="207" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="457" y="232" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a5wjil_di" bpmnElement="Flow_1a5wjil">
        <di:waypoint x="440" y="232" />
        <di:waypoint x="440" y="470" />
        <di:waypoint x="1410" y="470" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="456" y="483" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jkz7mj_di" bpmnElement="Flow_1jkz7mj">
        <di:waypoint x="440" y="232" />
        <di:waypoint x="440" y="630" />
        <di:waypoint x="520" y="630" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="456" y="641" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_011n3y8_di" bpmnElement="Flow_011n3y8">
        <di:waypoint x="1340" y="207" />
        <di:waypoint x="1410" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07i65vl_di" bpmnElement="Flow_07i65vl">
        <di:waypoint x="780" y="207" />
        <di:waypoint x="845" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_044gqut_di" bpmnElement="Flow_044gqut">
        <di:waypoint x="1510" y="630" />
        <di:waypoint x="1582" y="630" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00jaqqd_di" bpmnElement="Flow_00jaqqd">
        <di:waypoint x="755" y="630" />
        <di:waypoint x="1410" y="630" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="800" y="609" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12j0vak_di" bpmnElement="Flow_12j0vak">
        <di:waypoint x="730" y="655" />
        <di:waypoint x="730" y="750" />
        <di:waypoint x="1582" y="750" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="738" y="687" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ki9b40_di" bpmnElement="Flow_1ki9b40">
        <di:waypoint x="1510" y="320" />
        <di:waypoint x="1582" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nwj9kt_di" bpmnElement="Flow_1nwj9kt">
        <di:waypoint x="208" y="207" />
        <di:waypoint x="260" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0x0f06e_di" bpmnElement="Flow_0x0f06e">
        <di:waypoint x="1510" y="207" />
        <di:waypoint x="1582" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0p6n5wl_di" bpmnElement="Flow_0p6n5wl">
        <di:waypoint x="620" y="207" />
        <di:waypoint x="680" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yjkkkh_di" bpmnElement="Flow_0yjkkkh">
        <di:waypoint x="895" y="207" />
        <di:waypoint x="1125" y="207" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1001" y="189" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cl3hnn_di" bpmnElement="Flow_1cl3hnn">
        <di:waypoint x="870" y="182" />
        <di:waypoint x="870" y="120" />
        <di:waypoint x="960" y="120" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="878" y="148" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0iqj8x1_di" bpmnElement="Flow_0iqj8x1">
        <di:waypoint x="1175" y="207" />
        <di:waypoint x="1240" y="207" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1da25ub_di" bpmnElement="Flow_1da25ub">
        <di:waypoint x="1060" y="120" />
        <di:waypoint x="1150" y="120" />
        <di:waypoint x="1150" y="182" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05srrqt_di" bpmnElement="Flow_05srrqt">
        <di:waypoint x="1510" y="470" />
        <di:waypoint x="1582" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kpll75_di" bpmnElement="Flow_1kpll75">
        <di:waypoint x="620" y="630" />
        <di:waypoint x="705" y="630" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
